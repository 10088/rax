<style>
  .foo {
    color: red;
  }

  .bar {
    background-color: yellow;
  }

  .headline {
    font-size: 32px;
  }

  .btn {
    padding: 2px 5px;
    margin: 0 10px;
    background-color: blue;
    color: #fff;
    border-radius: 5px;
    cursor: pointer;
  }

  .image {
    width: 200px;
  }
</style>

<template>
  <view>
    <text class="btn" @click="changeImage">Change Image</text>
    <image :src="src" class="image" />
    <image v-bind:src="src" class="image" />

    <icon class="foo" type="info" />
    <icon type="success" size="40" color="green" />

    <text class="bar headline">hello</text>
    <text>world</text>

    <text class="btn" @click="toggleIf">ToggleIf</text>
    <view v-if="show">
      show messageï¼š
      <text>{{myMessage}}</text>
    </view>

    <view>
      The list:
      <text @click="addItemToList" class="btn">Add Item</text>
      <text @click="deleteFirstItem" class="btn">Delete First</text>
      <text @click="deleteLastItem" class="btn">Delete Last</text>
      <view v-for="item in items">
        {{ item.message }}
      </view>
    </view>

    <text @click="handleOnClick" class="btn">+1</text>
    <view>counter:
      <text>{{count}}</text>
    </view>
    <view>counter * 2:
      <text>{{count2}}</text>
    </view>

    <text v-on:click="handleDeepChange" class="btn">+1 (Deep)</text>
    <view>
      <text>deep {{count}} data counter is: {{deep.count}}</text>
    </view>

    Default slot:
    <slot /> Named slot:
    <slot name="named" />

    <my-component>
      this is custom my-component slot
    </my-component>

    <test />

    <div @click="scheduler">test scheduler works</div>
  </view>
</template>

<script>
  import MyComponent from '../components/my-component.html';
  import Test from '../components/test.html';

  const defaultData = {
    show: true,
    count: 1,
    items: [{ message: 'list item 1' }, { message: 'list item 2' }],
    deep: {
      count: 10
    },
    src: 'https://gw.alicdn.com/tfs/TB1KfCvb3mTBuNjy1XbXXaMrVXa-218-58.png'
  };

  export default {
    props: ['my-message'],
    data() {
      return defaultData;
    },
    components: {
      'my-component': MyComponent,
      'test': Test,
    },
    methods: {
      changeImage() {
        this.src =
          'https://gw.alicdn.com/tfs/TB1FEW2nfDH8KJjy1XcXXcpdXXa-487-132.svg';
      },
      toggleIf() {
        this.show = !this.show;
      },
      handleOnClick(evt) {
        console.log('view is clicked');
        this.count++;
      },
      handleDeepChange(evt) {
        console.log('deep change view clicked');
        this.deep.count++;
      },
      addItemToList(evt) {
        this.items.push({
          message: `list item ${this.items.length + 1}`
        });
      },
      deleteFirstItem() {
        this.items.shift();
      },
      deleteLastItem() {
        this.items.pop();
      },
      scheduler() {
        console.log(this.items.length);
        this.show = !this.show;
        this.count++;
        this.items.push({
          message: 'asdf'
        });
        console.log(this.items.length);
      }
    },
    computed: {
      count2() {
        console.log('calculate count2')
        return this.count * 2;
      }
    },
    beforeCreate() {
      console.log('lifecycle beforeCreate');
    },
    created() {
      console.log('lifecycle created', this);
    },
    beforeMount() {
      console.log('lifecycle beforeMount');
    },
    mounted() {
      console.log('lifecycle mounted');
    },
    beforeUpdate() {
      console.log('lifecycle beforeUpdate');
    },
    updated() {
      console.log('lifecycle updated');
    },
    beforeDestroy() {
      console.log('lifecycle beforeDestroy');
    }
  };
</script>